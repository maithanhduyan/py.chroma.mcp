# Cấu trúc Dự án như sau:

```
..\py.chroma.mcp
├── config
├── pyproject.toml
├── src
│   ├── config
│   │   ├── __init__.py
│   │   ├── constants.py
│   │   └── settings.py
│   ├── db
│   │   ├── __init__.py
│   │   ├── chroma_client.py
│   │   └── schema.py
│   ├── embedding
│   │   ├── __init__.py
│   │   ├── chunker.py
│   │   └── embedding_model.py
│   ├── server.py
│   ├── tools
│   │   ├── __init__.py
│   │   ├── benchmark.py
│   │   ├── chunking.py
│   │   ├── ingest.py
│   │   └── search.py
│   └── utils
│       ├── __init__.py
│       ├── error.py
│       ├── logger.py
│       ├── similarity.py
│       └── timing.py
└── uv.lock
```
 ```
 config: Cấu hình server / embedding / chunking```
 server.py: Điểm khởi động server chính (entrypoint)```
 tools/: Tất cả MCP tools (được đánh dấu bằng @mcp.tool)```
 embedding/: Mô hình embedding + chunking```
 db/: ChromaDB client, cấu hình collection, schema```
 utils/: Các tiện ích chung```
 ```

# Danh sách chi tiết các file:

## File ..\py.chroma.mcp\src\server.py:
```python
# Generated by Copilot
import sys
import json
from chromadb import Client
from chromadb.config import Settings

class MCPServer:
    def __init__(self):
        self.client = Client(Settings())

    def handle_request(self, request: dict) -> dict:
        """
        Handle incoming MCP requests.

        Args:
            request (dict): The incoming request as a dictionary.

        Returns:
            dict: The response to the request.
        """
        try:
            action = request.get("action")
            if action == "add_document":
                return self.add_document(request)
            elif action == "query":
                return self.query(request)
            else:
                return {"error": "Unknown action"}
        except Exception as e:
            return {"error": str(e)}

    def add_document(self, request: dict) -> dict:
        """
        Add a document to the ChromaDB collection.

        Args:
            request (dict): The request containing document details.

        Returns:
            dict: The result of the operation.
        """
        collection_name = request.get("collection_name")
        document = request.get("document")
        metadata = request.get("metadata", {})

        if not collection_name or not document:
            return {"error": "Missing collection_name or document"}

        collection = self.client.get_or_create_collection(collection_name)
        collection.add(document, metadata)
        return {"status": "success"}

    def query(self, request: dict) -> dict:
        """
        Query a ChromaDB collection.

        Args:
            request (dict): The request containing query details.

        Returns:
            dict: The query results.
        """
        collection_name = request.get("collection_name")
        query_text = request.get("query_text")

        if not collection_name or not query_text:
            return {"error": "Missing collection_name or query_text"}

        collection = self.client.get_collection(collection_name)
        results = collection.query(query_text)
        return {"results": results}

    def run(self):
        """
        Start the MCP server to handle requests over stdio.
        """
        for line in sys.stdin:
            try:
                request = json.loads(line)
                response = self.handle_request(request)
                sys.stdout.write(json.dumps(response) + "\n")
                sys.stdout.flush()
            except json.JSONDecodeError:
                sys.stdout.write(json.dumps({"error": "Invalid JSON"}) + "\n")
                sys.stdout.flush()

if __name__ == "__main__":
    server = MCPServer()
    server.run()
```

## File ..\py.chroma.mcp\src\config\constants.py:
```python

```

## File ..\py.chroma.mcp\src\config\settings.py:
```python

```

## File ..\py.chroma.mcp\src\config\__init__.py:
```python

```

## File ..\py.chroma.mcp\src\db\chroma_client.py:
```python

```

## File ..\py.chroma.mcp\src\db\schema.py:
```python

```

## File ..\py.chroma.mcp\src\db\__init__.py:
```python

```

## File ..\py.chroma.mcp\src\embedding\chunker.py:
```python

```

## File ..\py.chroma.mcp\src\embedding\embedding_model.py:
```python

```

## File ..\py.chroma.mcp\src\embedding\__init__.py:
```python

```

## File ..\py.chroma.mcp\src\tools\benchmark.py:
```python

```

## File ..\py.chroma.mcp\src\tools\chunking.py:
```python

```

## File ..\py.chroma.mcp\src\tools\ingest.py:
```python

```

## File ..\py.chroma.mcp\src\tools\search.py:
```python

```

## File ..\py.chroma.mcp\src\tools\__init__.py:
```python

```

## File ..\py.chroma.mcp\src\utils\error.py:
```python

```

## File ..\py.chroma.mcp\src\utils\logger.py:
```python

```

## File ..\py.chroma.mcp\src\utils\similarity.py:
```python

```

## File ..\py.chroma.mcp\src\utils\timing.py:
```python

```

## File ..\py.chroma.mcp\src\utils\__init__.py:
```python

```

